<!DOCTYPE html>
<html>
<head>
    <title>Parkinson's Predictor</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f7f9fc;
            color: #333;
            text-align: center;
            padding: 40px;
        }

        h1 {
            font-size: 2.5em;
            color: #0066cc;
            margin-bottom: 20px;
        }

        form {
            margin: 30px auto;
            width: 60%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        label {
            text-align: left;
            font-weight: 600;
        }

        input[type="number"] {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 100%;
        }

        .button-group {
            grid-column: span 2;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #005bb5;
        }

        .secondary-btn {
            background-color: #999;
        }

        .secondary-btn:hover {
            background-color: #777;
        }
    </style>
</head>
<body>
    <h1>ðŸ§  Parkinson's Disease Predictor</h1>

    <form action="/parkinson" method="POST" id="predict-form">
        {% for feature in features %}
            <label for="{{ feature }}">{{ feature }}</label>
            <input type="number" step="any" name="{{ feature }}" required>
        {% endfor %}

        <div class="button-group">
            <button type="submit">Predict</button>

            <a href="/" style="text-decoration: none;">
                <button type="button" class="secondary-btn">Recheck</button>
            </a>

            <a href="../templates/dashboard.html" style="text-decoration: none;">
            <a href="/dashboard" style="text-decoration: none;">
                <button type="button">Back</button>
            </a>
        </div>
    </form>
    {% if result %}
    <div class="result" style="margin-top: 30px;">
        {% if 'Detected' in result %}
            <div style="
                background-color: #ffe6e6;
                color: #cc0000;
                border: 1px solid #cc0000;
                padding: 20px;
                border-radius: 8px;
                font-size: 1.3em;
            ">
                <strong>ðŸ©º Prediction:</strong> {{ result }}
            </div>
        {% else %}
            <div style="
                background-color: #e6f7ff;
                color: #0066cc;
                border: 1px solid #0066cc;
                padding: 20px;
                border-radius: 8px;
                font-size: 1.3em;
            ">
                <strong>ðŸ©º Prediction:</strong> {{ result }}
            </div>
        {% endif %}

        {% if suggestion %}
        <div style="
            background-color: #fffbe6;
            color: #8a6d3b;
            border: 1px solid #faebcc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 1em;
            text-align: left;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        ">
            <strong>ðŸ’¡ Advice:</strong> {{ suggestion }}
        </div>
        {% endif %}
    </div>
{% endif %}
<div class="result-table" style="margin-top: 30px; display: block;">
    <h4 class="text-center mt-4">Prediction Result</h4>
    <table class="table table-bordered" style="margin: auto; max-width: 600px;">
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody id="resultBody">
            {% for feature in features %}
                <tr>
                    <td>{{ feature }}</td>
                    <td>{{ request.form.get(feature) }}</td>
                </tr>
            {% endfor %}
            <tr>
                <td><strong>Prediction</strong></td>
                <td><strong>{{ result }}</strong></td>
            </tr>
        </tbody>
    </table>
    <button id="downloadPdf" class="btn btn-success mt-3">Download Report</button>
</div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
<script>
    document.getElementById("downloadPdf").addEventListener("click", function() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        doc.setFontSize(18);
        doc.text("Parkinson's Disease Prediction Report", 14, 22);

        doc.setFontSize(12);
        doc.text("User Input Data:", 14, 32);

        const inputData = [];
        document.querySelectorAll("#resultBody tr").forEach(row => {
            const cols = row.querySelectorAll("td");
            inputData.push([cols[0].innerText, cols[1].innerText]);
        });

        doc.autoTable({
            startY: 36,
            head: [['Parameter', 'Value']],
            body: inputData,
            theme: 'grid',
            styles: { fontSize: 10 }
        });

        doc.save("Parkinson_Prediction_Report.pdf");
    });
</script>

</html>

